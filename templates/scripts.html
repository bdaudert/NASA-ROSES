<!--css-->
<head>
    <link rel="stylesheet" href="static/css/nasa-roses.css">
</head>
<!--Highcharts-->
<script src="//code.highcharts.com/highcharts.js"></script>
<script src="//code.highcharts.com/highcharts-more.js"></script>
<script src="//code.highcharts.com/modules/exporting.js"></script>

<!--Leaflet-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin="">
</script>
<script src="https://unpkg.com/leaflet.vectorgrid@latest/dist/Leaflet.VectorGrid.bundled.js"></script>
<!--EXTERNAL JS-->
<!--Needed to zoom to fusiontables!!!-->
<script src="/static/js/geoxml3.js"></script>
<!--Progress Bar-->
<script src="/static/js/progressWindow.js"></script>
<!--Colorbar-->
<script src="/static/js/d3.v5.min.js"></script>
<script src="/static/js/colorScale.js"></script>

<!--My JS-->
<!--<script src="static/myjs/statics.js"></script>-->
<script src="static/myjs/utils.js"></script>
<script src="static/myjs/form-functions.js"></script>
<script src="static/myjs/map-functions.js"></script>
<script src="static/myjs/ts-functions.js"></script>
<script src="static/myjs/listeners.js"></script>
<script src="static/myjs/ajax-calls.js"></script>

<!--Run Time Scripts-->
<script>
    //Set the statics
    var statics = {}, js_statics = {};
    $.ajax({
        url: 'static/json/statics.json',
        async: false,
        dataType: 'json',
        success: function(data) {
            statics = data;
        }
    });
    $.ajax({
        url: 'static/json/js_statics.json',
        async: false,
        dataType: 'json',
        success: function(data) {
            js_statics = data;
        }
    });

    // Set the map data
    //FIX ME: can we move this to statics/myjs/map_functions?
    var region = $('#region').val(), 
        geojson_file_paths = [], map_geojson = {}, r, regions = [];
    if (region != 'landing_page'){
        geosjon_file_paths.push(js_statics.study_areas_geojson[region]);
        regions.push(region);
    }else{
        for (var i = 1; i < Object.keys(js_statics.study_areas_geojson).length; i++){
            r = Object.keys(js_statics.study_areas_geojson)[i];
            geojson_file_paths.push(js_statics.study_areas_geojson[r]);
            map_geojson[r] = null;
            regions.push(r);
        }
    }
    for (var i = 0; i < geojson_file_paths.length; i++){ 
        $.ajax({
            url: geojson_file_paths[i],
            async: false,
            dataType: 'json',
            success: function(data) {
                map_geojson[regions[i]] = data;
            }
        });
    }
    //Set up leaflet map
    $( document ).ready(function() {
        initialize_lf_map();
    });
    // Make selected divs draggable, e.g. the form
    $(function(){
        $( ".draggable" ).draggable();
    });
</script>
